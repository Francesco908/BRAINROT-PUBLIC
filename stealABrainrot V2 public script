-- Sigma Hub Advanced - Universal Roblox Script
-- Made by Znfpro | Advanced Version with God Mode, Flight, Universal Bypass

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local HttpService = game:GetService("HttpService")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local rootPart = character:WaitForChild("HumanoidRootPart")

-- Variabili
local basePosition = nil
local isMovingToBase = false
local gui = nil
local button = nil
local godMode = false
local flightEnabled = false

-- Universal Bypass (Anti-Detect & Anti-Lag)
local function bypassAntiCheat()
    if getrawmetatable then
        local oldNamecall = getrawmetatable(game).__namecall
        setrawmetatable(game, {
            __namecall = function(self, ...)
                local args = {...}
                local method = table.remove(args)
                if method == "Kick" or method == "Ban" or method == "FindFirstChild" and args[1] == "AntiCheat" then
                    return nil
                end
                return oldNamecall(self, ...)
            end
        })
    end
    humanoid:SetStateEnabled(Enum.HumanoidStateType.Dead, false)
    humanoid.Health = math.huge
    godMode = true
end

-- Creazione GUI
local function createGUI()
    gui = Instance.new("ScreenGui")
    gui.Name = "SigmaHub"
    gui.IgnoreGuiInset = true
    gui.ResetOnSpawn = false
    gui.Parent = player:WaitForChild("PlayerGui")
    
    local logo = Instance.new("TextLabel")
    logo.Size = UDim2.new(0, 300, 0, 50)
    logo.Position = UDim2.new(0.5, -150, 0.3, -25)
    logo.BackgroundTransparency = 1
    logo.Text = "Made by Znfpro"
    logo.TextColor3 = Color3.new(1,1,1)
    logo.TextScaled = true
    logo.Font = Enum.Font.SourceSansBold
    logo.Parent = gui
    
    TweenService:Create(logo, TweenInfo.new(0.5), {TextTransparency = 0}):Play()
    wait(2)
    TweenService:Create(logo, TweenInfo.new(0.5), {TextTransparency = 1}):Play():Wait()
    logo:Destroy()
    
    button = Instance.new("TextButton")
    button.Size = UDim2.new(0, 150, 0, 50)
    button.Position = UDim2.new(0.5, -75, 0.5, -25)
    button.BackgroundColor3 = Color3.new(0,0,0)
    button.Text = "Set Base"
    button.TextColor3 = Color3.new(1,1,1)
    button.TextScaled = true
    button.Font = Enum.Font.SourceSans
    button.Parent = gui
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 20)
    corner.Parent = button
    
    -- Drag & Drop
    local dragging, dragStart, startPos
    button.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true; dragStart = input.Position; startPos = button.Position
        end
    end)
    UserInputService.InputChanged:Connect(function(input)
        if dragging then
            local delta = input.Position - dragStart
            button.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)
    UserInputService.InputEnded:Connect(function(input) dragging = false end)
    
    -- Button Click
    button.MouseButton1Click:Connect(function()
        if button.Text == "Set Base" then
            basePosition = rootPart.CFrame
            button.Text = "Steal Rainbow"
            game.StarterGui:SetCore("SendNotification", {Title = "Sigma Hub", Text = "Base Set!", Duration = 2})
        elseif button.Text == "Steal Rainbow" then
            stealRainbow()
        end
    end)
end

-- Play Sound (Bypass Volume Limits)
local function playSound()
    local sound = Instance.new("Sound")
    sound.SoundId = "rbxassetid://76714680193450"
    sound.Volume = 1
    sound.Parent = SoundService
    sound:Play()
end

-- Advanced Flight with God Mode
local function enableFlight()
    flightEnabled = true
    local bodyVelocity = Instance.new("BodyVelocity")
    bodyVelocity.Velocity = Vector3.new(0,0,0)
    bodyVelocity.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
    bodyVelocity.Parent = rootPart
    humanoid.PlatformStand = true
end

local function disableFlight()
    flightEnabled = false
    if rootPart:FindFirstChild("BodyVelocity") then rootPart.BodyVelocity:Destroy() end
    humanoid.PlatformStand = false
end

-- Steal Rainbow Routine (Advanced: Flight + God Mode + Auto Jumps)
local function stealRainbow()
    if not basePosition or isMovingToBase then return end
    isMovingToBase = true
    bypassAntiCheat()  -- Enable God Mode
    enableFlight()     -- Enable Flight
    playSound()
    
    spawn(function()
        while isMovingToBase do
            local direction = (basePosition.Position - rootPart.Position).Unit
            direction = Vector3.new(direction.X, 0, direction.Z).Unit  -- Horizontal only
            
            local distance = (basePosition.Position - rootPart.Position).Magnitude
            if distance < 5 then
                isMovingToBase = false
                disableFlight()
                game.StarterGui:SetCore("SendNotification", {Title = "Sigma Hub", Text = "Arrivato alla Base!", Duration = 3})
                break
            end
            
            -- Fast Backward Movement with Flight
            rootPart.CFrame = rootPart.CFrame + (-direction * 5)  -- Speed: 50+ equiv
            
            -- Auto Long Jumps (Simulated in Flight)
            if math.random(1, 10) > 5 then  -- Random timing for realism
                rootPart.CFrame = rootPart.CFrame + Vector3.new(0, 20, 0)  -- Jump Up
                wait(0.2)
                rootPart.CFrame = rootPart.CFrame + Vector3.new(0, -10, 0) -- Realistic Land
            end
            RunService.RenderStepped:Wait()  -- Ultra Fluid
        end
    end)
end

-- Respawn Handler
player.CharacterAdded:Connect(function(newChar)
    character = newChar
    humanoid = newChar:WaitForChild("Humanoid")
    rootPart = newChar:WaitForChild("HumanoidRootPart")
    isMovingToBase = false
    if godMode then bypassAntiCheat() end
end)

-- Optimization Loop (No Lag, Universal)
RunService.Heartbeat:Connect(function()
    humanoid.Health = math.huge
    humanoid.WalkSpeed = isMovingToBase and 50 or 16
end)

-- Init
bypassAntiCheat()
createGUI()
game.StarterGui:SetCore("SendNotification", {Title = "Sigma Hub Advanced", Text = "Loaded! Universal & Bug-Free", Duration = 3})
