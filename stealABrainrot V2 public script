-- Instant Steal GUI Script for Roblox
-- Advanced teleport and movement bypass system

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- Variables for movement system
local isStealActive = false
local basePosition = nil
local movementConnection = nil
local cycleTime = 0
local isInCycle = false

-- Create ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "InstantStealGUI"
screenGui.Parent = playerGui
screenGui.ResetOnSpawn = false

-- Main Frame (Draggable)
local mainFrame = Instance.new("Frame")
mainFrame.Name = "MainFrame"
mainFrame.Parent = screenGui
mainFrame.Size = UDim2.new(0, 280, 0, 160)
mainFrame.Position = UDim2.new(0.5, -140, 0.3, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
mainFrame.BorderSizePixel = 0
mainFrame.Active = true
mainFrame.Draggable = true

-- Frame styling (hacker theme)
local frameCorner = Instance.new("UICorner")
frameCorner.CornerRadius = UDim.new(0, 8)
frameCorner.Parent = mainFrame

local frameStroke = Instance.new("UIStroke")
frameStroke.Color = Color3.fromRGB(0, 255, 150)
frameStroke.Thickness = 2
frameStroke.Parent = mainFrame

-- Glow effect
local glowFrame = Instance.new("Frame")
glowFrame.Name = "GlowFrame"
glowFrame.Parent = mainFrame
glowFrame.Size = UDim2.new(1, 6, 1, 6)
glowFrame.Position = UDim2.new(0, -3, 0, -3)
glowFrame.BackgroundColor3 = Color3.fromRGB(0, 255, 150)
glowFrame.BackgroundTransparency = 0.8
glowFrame.ZIndex = -1

local glowCorner = Instance.new("UICorner")
glowCorner.CornerRadius = UDim.new(0, 12)
glowCorner.Parent = glowFrame

-- Title
local titleLabel = Instance.new("TextLabel")
titleLabel.Name = "TitleLabel"
titleLabel.Parent = mainFrame
titleLabel.Size = UDim2.new(1, 0, 0, 35)
titleLabel.Position = UDim2.new(0, 0, 0, 0)
titleLabel.BackgroundTransparency = 1
titleLabel.Text = "INSTANT STEAL"
titleLabel.TextColor3 = Color3.fromRGB(0, 255, 150)
titleLabel.TextScaled = true
titleLabel.Font = Enum.Font.Code
titleLabel.TextStrokeTransparency = 0
titleLabel.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)

-- Status Label
local statusLabel = Instance.new("TextLabel")
statusLabel.Name = "StatusLabel"
statusLabel.Parent = mainFrame
statusLabel.Size = UDim2.new(1, -20, 0, 20)
statusLabel.Position = UDim2.new(0, 10, 0, 40)
statusLabel.BackgroundTransparency = 1
statusLabel.Text = "Status: READY"
statusLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
statusLabel.TextScaled = true
statusLabel.Font = Enum.Font.Code
statusLabel.TextXAlignment = Enum.TextXAlignment.Left

-- Set Base Position Button
local setBaseBtn = Instance.new("TextButton")
setBaseBtn.Name = "SetBaseBtn"
setBaseBtn.Parent = mainFrame
setBaseBtn.Size = UDim2.new(1, -20, 0, 30)
setBaseBtn.Position = UDim2.new(0, 10, 0, 70)
setBaseBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
setBaseBtn.Text = "SET BASE POSITION"
setBaseBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
setBaseBtn.TextScaled = true
setBaseBtn.Font = Enum.Font.Code
setBaseBtn.BorderSizePixel = 0

local setBaseBtnCorner = Instance.new("UICorner")
setBaseBtnCorner.CornerRadius = UDim.new(0, 5)
setBaseBtnCorner.Parent = setBaseBtn

local setBaseBtnStroke = Instance.new("UIStroke")
setBaseBtnStroke.Color = Color3.fromRGB(100, 100, 100)
setBaseBtnStroke.Thickness = 1
setBaseBtnStroke.Parent = setBaseBtn

-- Instant Steal Button
local stealBtn = Instance.new("TextButton")
stealBtn.Name = "StealBtn"
stealBtn.Parent = mainFrame
stealBtn.Size = UDim2.new(1, -20, 0, 35)
stealBtn.Position = UDim2.new(0, 10, 0, 110)
stealBtn.BackgroundColor3 = Color3.fromRGB(50, 20, 20)
stealBtn.Text = "INSTANT STEAL"
stealBtn.TextColor3 = Color3.fromRGB(255, 100, 100)
stealBtn.TextScaled = true
stealBtn.Font = Enum.Font.Code
stealBtn.BorderSizePixel = 0

local stealBtnCorner = Instance.new("UICorner")
stealBtnCorner.CornerRadius = UDim.new(0, 5)
stealBtnCorner.Parent = stealBtn

local stealBtnStroke = Instance.new("UIStroke")
stealBtnStroke.Color = Color3.fromRGB(255, 100, 100)
stealBtnStroke.Thickness = 2
stealBtnStroke.Parent = stealBtn

-- Button hover effects
local function createHoverEffect(button, hoverColor, normalColor)
    button.MouseEnter:Connect(function()
        local tween = TweenService:Create(button, TweenInfo.new(0.2), {BackgroundColor3 = hoverColor})
        tween:Play()
    end)
    
    button.MouseLeave:Connect(function()
        local tween = TweenService:Create(button, TweenInfo.new(0.2), {BackgroundColor3 = normalColor})
        tween:Play()
    end)
end

createHoverEffect(setBaseBtn, Color3.fromRGB(60, 60, 60), Color3.fromRGB(40, 40, 40))
createHoverEffect(stealBtn, Color3.fromRGB(80, 30, 30), Color3.fromRGB(50, 20, 20))

-- Advanced Teleport and Movement System
local function advancedBypassMovement()
    local character = player.Character
    if not character then return end
    
    local humanoid = character:FindFirstChild("Humanoid")
    local rootPart = character:FindFirstChild("HumanoidRootPart")
    
    if not humanoid or not rootPart or not basePosition then return end
    
    -- Get current position and calculate direction to base
    local currentPos = rootPart.Position
    local targetPos = basePosition
    local direction = (targetPos - currentPos).Unit
    
    -- Check if we're close to the target
    local distance = (targetPos - currentPos).Magnitude
    
    if distance < 8 then
        -- We've reached the base, stop the movement
        isStealActive = false
        statusLabel.Text = "Status: STEAL COMPLETE"
        stealBtn.Text = "INSTANT STEAL"
        stealBtn.BackgroundColor3 = Color3.fromRGB(50, 20, 20)
        if movementConnection then
            movementConnection:Disconnect()
            movementConnection = nil
        end
        humanoid.WalkSpeed = 16
        return
    end
    
    cycleTime = cycleTime + RunService.Heartbeat:Wait()
    
    if not isInCycle then
        -- Start new cycle
        isInCycle = true
        
        -- Phase 1: Instant teleport 50 studs up
        local teleportPos = Vector3.new(currentPos.X, currentPos.Y + 50, currentPos.Z)
        rootPart.CFrame = CFrame.new(teleportPos)
        
        -- Phase 2: Teleport back down to original Y position
        wait(0.1)
        rootPart.CFrame = CFrame.new(currentPos.X, currentPos.Y, currentPos.Z)
        
        -- Phase 3: Start fast walking towards base
        humanoid.WalkSpeed = 25 -- Increased speed for bypass
        cycleTime = 0
    end
    
    -- Walking phase (2 seconds)
    if cycleTime < 2 then
        -- Move towards base with bypass speed
        local moveDirection = direction * 3 -- More aggressive movement
        humanoid:MoveTo(currentPos + moveDirection)
    else
        -- Reset cycle
        isInCycle = false
        cycleTime = 0
    end
end

-- Set Base Position Function
local function setBasePosition()
    local character = player.Character
    if not character then 
        statusLabel.Text = "Status: NO CHARACTER"
        return 
    end
    
    local rootPart = character:FindFirstChild("HumanoidRootPart")
    if not rootPart then 
        statusLabel.Text = "Status: NO ROOT PART"
        return 
    end
    
    basePosition = rootPart.Position
    statusLabel.Text = "Status: BASE SET"
    
    -- Visual feedback
    local tween = TweenService:Create(setBaseBtn, TweenInfo.new(0.3), {BackgroundColor3 = Color3.fromRGB(20, 80, 20)})
    tween:Play()
    
    wait(1)
    
    local tween2 = TweenService:Create(setBaseBtn, TweenInfo.new(0.3), {BackgroundColor3 = Color3.fromRGB(40, 40, 40)})
    tween2:Play()
end

-- Instant Steal Function
local function startInstantSteal()
    if not basePosition then
        statusLabel.Text = "Status: SET BASE FIRST"
        return
    end
    
    if isStealActive then
        -- Stop steal
        isStealActive = false
        statusLabel.Text = "Status: STOPPED"
        stealBtn.Text = "INSTANT STEAL"
        stealBtn.BackgroundColor3 = Color3.fromRGB(50, 20, 20)
        
        if movementConnection then
            movementConnection:Disconnect()
            movementConnection = nil
        end
        
        -- Reset player speed
        local character = player.Character
        if character then
            local humanoid = character:FindFirstChild("Humanoid")
            if humanoid then
                humanoid.WalkSpeed = 16
            end
        end
        
        isInCycle = false
        cycleTime = 0
        return
    end
    
    -- Start steal
    isStealActive = true
    cycleTime = 0
    isInCycle = false
    
    statusLabel.Text = "Status: STEALING..."
    stealBtn.Text = "STOP STEAL"
    stealBtn.BackgroundColor3 = Color3.fromRGB(80, 30, 30)
    
    -- Start movement loop
    movementConnection = RunService.Heartbeat:Connect(advancedBypassMovement)
end

-- Button connections
setBaseBtn.MouseButton1Click:Connect(setBasePosition)
stealBtn.MouseButton1Click:Connect(startInstantSteal)

-- Cleanup on player leaving
Players.PlayerRemoving:Connect(function(leavingPlayer)
    if leavingPlayer == player then
        if movementConnection then
            movementConnection:Disconnect()
        end
    end
end)

-- Glow animation
spawn(function()
    while wait(0.1) do
        if glowFrame and glowFrame.Parent then
            local tween = TweenService:Create(glowFrame, TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut, -1, true), {BackgroundTransparency = 0.95})
            tween:Play()
        else
            break
        end
    end
end)

print("Instant Steal GUI loaded successfully!")
