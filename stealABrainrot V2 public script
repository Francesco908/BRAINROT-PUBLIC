-- Sigma Hub - Admin vs Admin Script
-- Made by Znfpro

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local SoundService = game:GetService("SoundService")

local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local rootPart = character:WaitForChild("HumanoidRootPart")

-- Variabili globali
local basePosition = nil
local isMovingToBase = false
local gui = nil
local button = nil

-- Creazione GUI
local function createGUI()
    -- Screen GUI principale
    gui = Instance.new("ScreenGui")
    gui.Name = "SigmaHub"
    gui.ResetOnSpawn = false
    gui.Parent = player:WaitForChild("PlayerGui")
    
    -- Logo iniziale "Made by Znfpro"
    local logo = Instance.new("TextLabel")
    logo.Name = "Logo"
    logo.Size = UDim2.new(0, 300, 0, 50)
    logo.Position = UDim2.new(0.5, -150, 0.3, -25)
    logo.BackgroundTransparency = 1
    logo.Text = "Made by Znfpro"
    logo.TextColor3 = Color3.new(1, 1, 1)
    logo.TextScaled = true
    logo.Font = Enum.Font.SourceSansBold
    logo.Parent = gui
    
    -- Animazione fade-in del logo
    logo.TextTransparency = 1
    local fadeIn = TweenService:Create(logo, TweenInfo.new(0.5), {TextTransparency = 0})
    fadeIn:Play()
    
    -- Fade-out dopo 2 secondi
    wait(2)
    local fadeOut = TweenService:Create(logo, TweenInfo.new(0.5), {TextTransparency = 1})
    fadeOut:Play()
    fadeOut.Completed:Connect(function()
        logo:Destroy()
    end)
    
    -- Creazione pulsante mobile
    wait(0.5)
    button = Instance.new("TextButton")
    button.Name = "MainButton"
    button.Size = UDim2.new(0, 150, 0, 50)
    button.Position = UDim2.new(0.5, -75, 0.5, -25)
    button.BackgroundColor3 = Color3.new(0, 0, 0)
    button.BorderSizePixel = 0
    button.Text = "Set Base"
    button.TextColor3 = Color3.new(1, 1, 1)
    button.TextScaled = true
    button.Font = Enum.Font.SourceSans
    button.Parent = gui
    
    -- Bordi arrotondati
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 20)
    corner.Parent = button
    
    -- Drag and drop functionality
    local dragging = false
    local dragStart = nil
    local startPos = nil
    
    button.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPos = button.Position
        end
    end)
    
    UserInputService.InputChanged:Connect(function(input)
        if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            local delta = input.Position - dragStart
            button.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)
    
    UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = false
        end
    end)
    
    -- Click functionality
    button.MouseButton1Click:Connect(function()
        if button.Text == "Set Base" then
            basePosition = rootPart.CFrame
            button.Text = "Steal Rainbow"
            game.StarterGui:SetCore("SendNotification", {
                Title = "Sigma Hub",
                Text = "Base position saved!",
                Duration = 2
            })
        elseif button.Text == "Steal Rainbow" then
            stealRainbow()
        end
    end)
end

-- Funzione per riprodurre la canzone
local function playSound()
    local sound = Instance.new("Sound")
    sound.SoundId = "rbxassetid://76714680193450"
    sound.Volume = 0.5
    sound.Parent = workspace
    sound.Playing = true
end

-- Funzione per il movimento avanzato
local function stealRainbow()
    if not basePosition or isMovingToBase then return end
    
    isMovingToBase = true
    playSound()
    
    -- Calcola direzione verso la base
    local direction = (basePosition.Position - rootPart.Position).Unit
    direction = Vector3.new(direction.X, 0, direction.Z).Unit -- Solo movimento orizzontale
    
    -- Loop di movimento
    spawn(function()
        while isMovingToBase do
            local distance = (basePosition.Position - rootPart.Position).Magnitude
            
            if distance < 5 then
                -- Arrivato alla base
                isMovingToBase = false
                humanoid:MoveTo(basePosition.Position)
                
                game.StarterGui:SetCore("SendNotification", {
                    Title = "Sigma Hub",
                    Text = "Arrivato alla Base!",
                    Duration = 3
                })
                break
            end
            
            -- Movimento all'indietro veloce
            local moveDirection = -direction * 50 -- Velocità aumentata
            rootPart.Velocity = Vector3.new(moveDirection.X, rootPart.Velocity.Y, moveDirection.Z)
            
            -- Salto automatico avanzato
            if humanoid.FloorMaterial ~= Enum.Material.Air then
                -- Long jump
                rootPart.Velocity = rootPart.Velocity + Vector3.new(0, 80, 0) -- Salto più alto
                wait(0.1)
                -- Spinta orizzontale extra durante il salto
                rootPart.Velocity = rootPart.Velocity + (direction * -30)
            end
            
            wait(0.1)
        end
    end)
end

-- Gestione respawn del personaggio
player.CharacterAdded:Connect(function(newCharacter)
    character = newCharacter
    humanoid = character:WaitForChild("Humanoid")
    rootPart = character:WaitForChild("HumanoidRootPart")
    isMovingToBase = false
end)

-- Anti-lag e ottimizzazione
RunService.Heartbeat:Connect(function()
    if isMovingToBase and rootPart then
        -- Mantieni movimento fluido
        humanoid.WalkSpeed = 50
    else
        humanoid.WalkSpeed = 16 -- Velocità normale
    end
end)

-- Avvio script
createGUI()

-- Notifica di caricamento completato
game.StarterGui:SetCore("SendNotification", {
