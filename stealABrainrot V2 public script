-- RUBBA BRAINROT GUI - Sistema Perfetto con Bypass!

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

local Player = Players.LocalPlayer
local PlayerGui = Player:WaitForChild("PlayerGui")

-- Variabili globali
local deliveryPosition = nil
local isDragging = false
local isMinimized = false
local noclipEnabled = false
local noclipConnection = nil
local teleporting = false

-- TELEPORT SCREEN
local TeleportScreen = Instance.new("ScreenGui")
TeleportScreen.Name = "TeleportScreen"
TeleportScreen.DisplayOrder = 999999999
TeleportScreen.IgnoreGuiInset = true
TeleportScreen.Enabled = false
TeleportScreen.Parent = PlayerGui

local BlackScreen = Instance.new("Frame")
BlackScreen.Name = "BlackScreen"
BlackScreen.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
BlackScreen.BorderSizePixel = 0
BlackScreen.Size = UDim2.new(1, 0, 1, 0)
BlackScreen.Parent = TeleportScreen

local TeleportText = Instance.new("TextLabel")
TeleportText.Name = "TeleportText"
TeleportText.BackgroundTransparency = 1
TeleportText.Position = UDim2.new(0, 0, 0.4, 0)
TeleportText.Size = UDim2.new(1, 0, 0.2, 0)
TeleportText.Font = Enum.Font.GothamBold
TeleportText.Text = "TELEPORTING..."
TeleportText.TextColor3 = Color3.fromRGB(255, 255, 255)
TeleportText.TextSize = 32
TeleportText.Parent = TeleportScreen

-- BYPASS FUNCTION
local function bypassAnticheat(character)
    if not character then return end
    
    local humanoid = character:FindFirstChild("Humanoid")
    local root = character:FindFirstChild("HumanoidRootPart")
    if not humanoid or not root then return end
    
    -- Store original properties
    local originalProperties = {
        gravity = workspace.Gravity,
        walkSpeed = humanoid.WalkSpeed,
        jumpPower = humanoid.JumpPower,
        hipHeight = humanoid.HipHeight,
        collisionType = root.CanCollide,
        velocity = root.Velocity,
        cframe = root.CFrame
    }
    
    -- Apply bypass
    workspace.Gravity = 0
    humanoid.WalkSpeed = 0
    humanoid.JumpPower = 0
    humanoid.HipHeight = 0
    root.CanCollide = false
    root.Velocity = Vector3.new(0, 0, 0)
    
    -- Avoid detection
    for _, part in pairs(character:GetDescendants()) do
        if part:IsA("BasePart") then
            part.CanCollide = false
            part.Velocity = Vector3.new(0, 0, 0)
            part.RotVelocity = Vector3.new(0, 0, 0)
        end
    end
    
    return originalProperties
end

-- RESTORE FUNCTION
local function restoreCharacter(character, originalProperties)
    if not character or not originalProperties then return end
    
    local humanoid = character:FindFirstChild("Humanoid")
    local root = character:FindFirstChild("HumanoidRootPart")
    if not humanoid or not root then return end
    
    workspace.Gravity = originalProperties.gravity
    humanoid.WalkSpeed = originalProperties.walkSpeed
    humanoid.JumpPower = originalProperties.jumpPower
    humanoid.HipHeight = originalProperties.hipHeight
    root.CanCollide = originalProperties.collisionType
    
    for _, part in pairs(character:GetDescendants()) do
        if part:IsA("BasePart") then
            part.CanCollide = true
        end
    end
end

-- FAST TELEPORT FUNCTION
local function instantTeleport()
    if teleporting or not deliveryPosition then return end
    
    local character = Player.Character
    if not character then return end
    
    teleporting = true
    TeleportScreen.Enabled = true
    
    local originalProperties = bypassAnticheat(character)
    
    -- Instant teleport with safety checks
    local success = pcall(function()
        local root = character:FindFirstChild("HumanoidRootPart")
        if root then
            root.CFrame = CFrame.new(deliveryPosition)
        end
    end)
    
    wait(0.1) -- Short delay for stability
    
    restoreCharacter(character, originalProperties)
    TeleportScreen.Enabled = false
    teleporting = false
    
    return success
end

-- FLYING TELEPORT FUNCTION
local function flyToDelivery()
    if teleporting or not deliveryPosition then return end
    
    local character = Player.Character
    if not character then return end
    
    teleporting = true
    
    local originalProperties = bypassAnticheat(character)
    local root = character:FindFirstChild("HumanoidRootPart")
    if not root then return end
    
    -- Super fast flight
    local distance = (deliveryPosition - root.Position).Magnitude
    local speed = math.min(distance / 2, 500) -- Max speed
    
    local tween = TweenService:Create(root, 
        TweenInfo.new(distance / speed, Enum.EasingStyle.Linear), 
        {CFrame = CFrame.new(deliveryPosition)}
    )
    
    tween:Play()
    tween.Completed:Wait()
    
    wait(0.1) -- Short stabilization delay
    
    restoreCharacter(character, originalProperties)
    teleporting = false
end

-- GUI Creation
[... resto del tuo codice GUI precedente ...]

-- Aggiungi il pulsante TP TO BASE
local BaseTPBtn = Instance.new("TextButton")
BaseTPBtn.Parent = Content
BaseTPBtn.BackgroundColor3 = Color3.fromRGB(255, 100, 100)
BaseTPBtn.BorderSizePixel = 0
BaseTPBtn.Position = UDim2.new(0.05, 0, 0.8, 0)
BaseTPBtn.Size = UDim2.new(0.9, 0, 0, 35)
BaseTPBtn.Font = Enum.Font.GothamBold
BaseTPBtn.Text = "âš¡ TP TO BASE"
BaseTPBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
BaseTPBtn.TextSize = 12

local BaseTPCorner = Instance.new("UICorner")
BaseTPCorner.CornerRadius = UDim.new(0, 8)
BaseTPCorner.Parent = BaseTPBtn

-- Eventi
TeleportBtn.MouseButton1Click:Connect(flyToDelivery)
BaseTPBtn.MouseButton1Click:Connect(instantTeleport)

-- Rendi il GUI draggabile ovunque
local function enableDragging(frame)
    local dragging
    local dragStart
    local startPos

    frame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPos = frame.Position
            
            local connection
            connection = input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                    connection:Disconnect()
                end
            end)
        end
    end)

    UserInputService.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
            if dragging then
                local delta = input.Position - dragStart
                frame.Position = UDim2.new(
                    startPos.X.Scale,
                    startPos.X.Offset + delta.X,
                    startPos.Y.Scale,
                    startPos.Y.Offset + delta.Y
                )
            end
        end
    end)
end

enableDragging(MainFrame)

[... resto del tuo codice ...]
