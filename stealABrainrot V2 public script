-- Advanced Mobile Roblox Script
-- Infinite Jump + Speed Boost + GUI
-- Ottimizzato per dispositivi mobili

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local GuiService = game:GetService("GuiService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")
local mouse = player:GetMouse()

-- Variabili globali
local isInfiniteJumpEnabled = false
local isSpeedBoostEnabled = false
local originalWalkSpeed = 16
local currentSpeedBoost = 50
local jumpConnection = nil
local speedConnection = nil
local gui = nil
local dragToggle = nil
local dragSpeed = 0.25
local dragStart = nil
local startPos = nil
local isMinimized = false

-- Funzione per creare la GUI principale
local function createMainGUI()
    -- ScreenGui principale
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "AdvancedMobileScript"
    screenGui.ResetOnSpawn = false
    screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    screenGui.Parent = playerGui
    
    -- Frame principale (draggable)
    local mainFrame = Instance.new("Frame")
    mainFrame.Name = "MainFrame"
    mainFrame.Size = UDim2.new(0, 350, 0, 450)
    mainFrame.Position = UDim2.new(0.5, -175, 0.5, -225)
    mainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
    mainFrame.BorderSizePixel = 0
    mainFrame.ClipsDescendants = true
    mainFrame.Parent = screenGui
    
    -- Corner per il frame principale
    local mainCorner = Instance.new("UICorner")
    mainCorner.CornerRadius = UDim.new(0, 12)
    mainCorner.Parent = mainFrame
    
    -- Gradient per il frame principale
    local gradient = Instance.new("UIGradient")
    gradient.Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, Color3.fromRGB(35, 35, 50)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(20, 20, 30))
    }
    gradient.Rotation = 45
    gradient.Parent = mainFrame
    
    -- Header bar per il dragging
    local headerBar = Instance.new("Frame")
    headerBar.Name = "HeaderBar"
    headerBar.Size = UDim2.new(1, 0, 0, 50)
    headerBar.Position = UDim2.new(0, 0, 0, 0)
    headerBar.BackgroundColor3 = Color3.fromRGB(45, 45, 65)
    headerBar.BorderSizePixel = 0
    headerBar.Parent = mainFrame
    
    -- Corner per header
    local headerCorner = Instance.new("UICorner")
    headerCorner.CornerRadius = UDim.new(0, 12)
    headerCorner.Parent = headerBar
    
    -- Titolo
    local titleLabel = Instance.new("TextLabel")
    titleLabel.Name = "TitleLabel"
    titleLabel.Size = UDim2.new(1, -100, 1, 0)
    titleLabel.Position = UDim2.new(0, 10, 0, 0)
    titleLabel.BackgroundTransparency = 1
    titleLabel.Text = "üöÄ Advanced Mobile Script"
    titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    titleLabel.TextScaled = true
    titleLabel.Font = Enum.Font.GothamBold
    titleLabel.Parent = headerBar
    
    -- Bottone minimizza
    local minimizeBtn = Instance.new("TextButton")
    minimizeBtn.Name = "MinimizeButton"
    minimizeBtn.Size = UDim2.new(0, 35, 0, 35)
    minimizeBtn.Position = UDim2.new(1, -80, 0.5, -17.5)
    minimizeBtn.BackgroundColor3 = Color3.fromRGB(255, 193, 7)
    minimizeBtn.BorderSizePixel = 0
    minimizeBtn.Text = "‚àí"
    minimizeBtn.TextColor3 = Color3.fromRGB(0, 0, 0)
    minimizeBtn.TextScaled = true
    minimizeBtn.Font = Enum.Font.GothamBold
    minimizeBtn.Parent = headerBar
    
    local minimizeCorner = Instance.new("UICorner")
    minimizeCorner.CornerRadius = UDim.new(0, 8)
    minimizeCorner.Parent = minimizeBtn
    
    -- Bottone chiudi
    local closeBtn = Instance.new("TextButton")
    closeBtn.Name = "CloseButton"
    closeBtn.Size = UDim2.new(0, 35, 0, 35)
    closeBtn.Position = UDim2.new(1, -40, 0.5, -17.5)
    closeBtn.BackgroundColor3 = Color3.fromRGB(220, 53, 69)
    closeBtn.BorderSizePixel = 0
    closeBtn.Text = "‚úï"
    closeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    closeBtn.TextScaled = true
    closeBtn.Font = Enum.Font.GothamBold
    closeBtn.Parent = headerBar
    
    local closeCorner = Instance.new("UICorner")
    closeCorner.CornerRadius = UDim.new(0, 8)
    closeCorner.Parent = closeBtn
    
    -- Container per il contenuto
    local contentFrame = Instance.new("Frame")
    contentFrame.Name = "ContentFrame"
    contentFrame.Size = UDim2.new(1, 0, 1, -50)
    contentFrame.Position = UDim2.new(0, 0, 0, 50)
    contentFrame.BackgroundTransparency = 1
    contentFrame.Parent = mainFrame
    
    return screenGui, mainFrame, headerBar, contentFrame, minimizeBtn, closeBtn
end

-- Funzione per creare le tabs
local function createTabs(contentFrame)
    -- Tab container
    local tabContainer = Instance.new("Frame")
    tabContainer.Name = "TabContainer"
    tabContainer.Size = UDim2.new(1, -20, 0, 40)
    tabContainer.Position = UDim2.new(0, 10, 0, 10)
    tabContainer.BackgroundTransparency = 1
    tabContainer.Parent = contentFrame
    
    -- Tab buttons
    local jumpTab = Instance.new("TextButton")
    jumpTab.Name = "JumpTab"
    jumpTab.Size = UDim2.new(0.5, -5, 1, 0)
    jumpTab.Position = UDim2.new(0, 0, 0, 0)
    jumpTab.BackgroundColor3 = Color3.fromRGB(0, 123, 255)
    jumpTab.BorderSizePixel = 0
    jumpTab.Text = "ü¶ò Jump"
    jumpTab.TextColor3 = Color3.fromRGB(255, 255, 255)
    jumpTab.TextScaled = true
    jumpTab.Font = Enum.Font.GothamBold
    jumpTab.Parent = tabContainer
    
    local jumpTabCorner = Instance.new("UICorner")
    jumpTabCorner.CornerRadius = UDim.new(0, 8)
    jumpTabCorner.Parent = jumpTab
    
    local speedTab = Instance.new("TextButton")
    speedTab.Name = "SpeedTab"
    speedTab.Size = UDim2.new(0.5, -5, 1, 0)
    speedTab.Position = UDim2.new(0.5, 5, 0, 0)
    speedTab.BackgroundColor3 = Color3.fromRGB(108, 117, 125)
    speedTab.BorderSizePixel = 0
    speedTab.Text = "‚ö° Speed"
    speedTab.TextColor3 = Color3.fromRGB(255, 255, 255)
    speedTab.TextScaled = true
    speedTab.Font = Enum.Font.GothamBold
    speedTab.Parent = tabContainer
    
    local speedTabCorner = Instance.new("UICorner")
    speedTabCorner.CornerRadius = UDim.new(0, 8)
    speedTabCorner.Parent = speedTab
    
    -- Content areas
    local jumpContent = Instance.new("Frame")
    jumpContent.Name = "JumpContent"
    jumpContent.Size = UDim2.new(1, -20, 1, -70)
    jumpContent.Position = UDim2.new(0, 10, 0, 60)
    jumpContent.BackgroundTransparency = 1
    jumpContent.Visible = true
    jumpContent.Parent = contentFrame
    
    local speedContent = Instance.new("Frame")
    speedContent.Name = "SpeedContent"
    speedContent.Size = UDim2.new(1, -20, 1, -70)
    speedContent.Position = UDim2.new(0, 10, 0, 60)
    speedContent.BackgroundTransparency = 1
    speedContent.Visible = false
    speedContent.Parent = contentFrame
    
    return tabContainer, jumpTab, speedTab, jumpContent, speedContent
end

-- Funzione per creare i controlli Jump
local function createJumpControls(jumpContent)
    -- Toggle per Infinite Jump
    local jumpToggleFrame = Instance.new("Frame")
    jumpToggleFrame.Size = UDim2.new(1, 0, 0, 80)
    jumpToggleFrame.Position = UDim2.new(0, 0, 0, 0)
    jumpToggleFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 55)
    jumpToggleFrame.BorderSizePixel = 0
    jumpToggleFrame.Parent = jumpContent
    
    local jumpToggleCorner = Instance.new("UICorner")
    jumpToggleCorner.CornerRadius = UDim.new(0, 10)
    jumpToggleCorner.Parent = jumpToggleFrame
    
    local jumpLabel = Instance.new("TextLabel")
    jumpLabel.Size = UDim2.new(1, -80, 1, 0)
    jumpLabel.Position = UDim2.new(0, 15, 0, 0)
    jumpLabel.BackgroundTransparency = 1
    jumpLabel.Text = "ü¶ò Infinite Jump\nSalta infinitamente ovunque!"
    jumpLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    jumpLabel.TextScaled = true
    jumpLabel.Font = Enum.Font.Gotham
    jumpLabel.TextXAlignment = Enum.TextXAlignment.Left
    jumpLabel.Parent = jumpToggleFrame
    
    local jumpToggle = Instance.new("TextButton")
    jumpToggle.Name = "JumpToggle"
    jumpToggle.Size = UDim2.new(0, 60, 0, 30)
    jumpToggle.Position = UDim2.new(1, -70, 0.5, -15)
    jumpToggle.BackgroundColor3 = Color3.fromRGB(220, 53, 69)
    jumpToggle.BorderSizePixel = 0
    jumpToggle.Text = "OFF"
    jumpToggle.TextColor3 = Color3.fromRGB(255, 255, 255)
    jumpToggle.TextScaled = true
    jumpToggle.Font = Enum.Font.GothamBold
    jumpToggle.Parent = jumpToggleFrame
    
    local jumpToggleCorner2 = Instance.new("UICorner")
    jumpToggleCorner2.CornerRadius = UDim.new(0, 15)
    jumpToggleCorner2.Parent = jumpToggle
    
    -- Info panel
    local infoFrame = Instance.new("Frame")
    infoFrame.Size = UDim2.new(1, 0, 0, 120)
    infoFrame.Position = UDim2.new(0, 0, 0, 100)
    infoFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 55)
    infoFrame.BorderSizePixel = 0
    infoFrame.Parent = jumpContent
    
    local infoCorner = Instance.new("UICorner")
    infoCorner.CornerRadius = UDim.new(0, 10)
    infoCorner.Parent = infoFrame
    
    local infoLabel = Instance.new("TextLabel")
    infoLabel.Size = UDim2.new(1, -20, 1, -20)
    infoLabel.Position = UDim2.new(0, 10, 0, 10)
    infoLabel.BackgroundTransparency = 1
    infoLabel.Text = "‚ÑπÔ∏è COME FUNZIONA:\n\n‚Ä¢ Tocca lo schermo per saltare\n‚Ä¢ Funziona anche in aria\n‚Ä¢ Logica avanzata mobile-friendly\n‚Ä¢ Nessun limite di salti!"
    infoLabel.TextColor3 = Color3.fromRGB(173, 216, 230)
    infoLabel.TextScaled = true
    infoLabel.Font = Enum.Font.Gotham
    infoLabel.TextXAlignment = Enum.TextXAlignment.Left
    infoLabel.TextYAlignment = Enum.TextYAlignment.Top
    infoLabel.Parent = infoFrame
    
    return jumpToggle
end

-- Funzione per creare i controlli Speed
local function createSpeedControls(speedContent)
    -- Toggle per Speed Boost
    local speedToggleFrame = Instance.new("Frame")
    speedToggleFrame.Size = UDim2.new(1, 0, 0, 80)
    speedToggleFrame.Position = UDim2.new(0, 0, 0, 0)
    speedToggleFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 55)
    speedToggleFrame.BorderSizePixel = 0
    speedToggleFrame.Parent = speedContent
    
    local speedToggleCorner = Instance.new("UICorner")
    speedToggleCorner.CornerRadius = UDim.new(0, 10)
    speedToggleCorner.Parent = speedToggleFrame
    
    local speedLabel = Instance.new("TextLabel")
    speedLabel.Size = UDim2.new(1, -80, 1, 0)
    speedLabel.Position = UDim2.new(0, 15, 0, 0)
    speedLabel.BackgroundTransparency = 1
    speedLabel.Text = "‚ö° Speed Coil Simulator\nVelocit√† costante automatica!"
    speedLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    speedLabel.TextScaled = true
    speedLabel.Font = Enum.Font.Gotham
    speedLabel.TextXAlignment = Enum.TextXAlignment.Left
    speedLabel.Parent = speedToggleFrame
    
    local speedToggle = Instance.new("TextButton")
    speedToggle.Name = "SpeedToggle"
    speedToggle.Size = UDim2.new(0, 60, 0, 30)
    speedToggle.Position = UDim2.new(1, -70, 0.5, -15)
    speedToggle.BackgroundColor3 = Color3.fromRGB(220, 53, 69)
    speedToggle.BorderSizePixel = 0
    speedToggle.Text = "OFF"
    speedToggle.TextColor3 = Color3.fromRGB(255, 255, 255)
    speedToggle.TextScaled = true
    speedToggle.Font = Enum.Font.GothamBold
    speedToggle.Parent = speedToggleFrame
    
    local speedToggleCorner2 = Instance.new("UICorner")
    speedToggleCorner2.CornerRadius = UDim.new(0, 15)
    speedToggleCorner2.Parent = speedToggle
    
    -- Speed slider
    local sliderFrame = Instance.new("Frame")
    sliderFrame.Size = UDim2.new(1, 0, 0, 60)
    sliderFrame.Position = UDim2.new(0, 0, 0, 100)
    sliderFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 55)
    sliderFrame.BorderSizePixel = 0
    sliderFrame.Parent = speedContent
    
    local sliderCorner = Instance.new("UICorner")
    sliderCorner.CornerRadius = UDim.new(0, 10)
    sliderCorner.Parent = sliderFrame
    
    local sliderLabel = Instance.new("TextLabel")
    sliderLabel.Size = UDim2.new(1, 0, 0, 25)
    sliderLabel.Position = UDim2.new(0, 0, 0, 5)
    sliderLabel.BackgroundTransparency = 1
    sliderLabel.Text = "Velocit√†: 50"
    sliderLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    sliderLabel.TextScaled = true
    sliderLabel.Font = Enum.Font.GothamBold
    sliderLabel.Parent = sliderFrame
    
    local sliderBg = Instance.new("Frame")
    sliderBg.Size = UDim2.new(1, -40, 0, 8)
    sliderBg.Position = UDim2.new(0, 20, 0, 35)
    sliderBg.BackgroundColor3 = Color3.fromRGB(70, 70, 85)
    sliderBg.BorderSizePixel = 0
    sliderBg.Parent = sliderFrame
    
    local sliderBgCorner = Instance.new("UICorner")
    sliderBgCorner.CornerRadius = UDim.new(0, 4)
    sliderBgCorner.Parent = sliderBg
    
    local sliderFill = Instance.new("Frame")
    sliderFill.Size = UDim2.new(0.33, 0, 1, 0)
    sliderFill.Position = UDim2.new(0, 0, 0, 0)
    sliderFill.BackgroundColor3 = Color3.fromRGB(0, 123, 255)
    sliderFill.BorderSizePixel = 0
    sliderFill.Parent = sliderBg
    
    local sliderFillCorner = Instance.new("UICorner")
    sliderFillCorner.CornerRadius = UDim.new(0, 4)
    sliderFillCorner.Parent = sliderFill
    
    local sliderButton = Instance.new("TextButton")
    sliderButton.Size = UDim2.new(0, 20, 0, 20)
    sliderButton.Position = UDim2.new(0.33, -10, 0.5, -10)
    sliderButton.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    sliderButton.BorderSizePixel = 0
    sliderButton.Text = ""
    sliderButton.Parent = sliderBg
    
    local sliderButtonCorner = Instance.new("UICorner")
    sliderButtonCorner.CornerRadius = UDim.new(0, 10)
    sliderButtonCorner.Parent = sliderButton
    
    -- Info panel
    local speedInfoFrame = Instance.new("Frame")
    speedInfoFrame.Size = UDim2.new(1, 0, 0, 120)
    speedInfoFrame.Position = UDim2.new(0, 0, 0, 180)
    speedInfoFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 55)
    speedInfoFrame.BorderSizePixel = 0
    speedInfoFrame.Parent = speedContent
    
    local speedInfoCorner = Instance.new("UICorner")
    speedInfoCorner.CornerRadius = UDim.new(0, 10)
    speedInfoCorner.Parent = speedInfoFrame
    
    local speedInfoLabel = Instance.new("TextLabel")
    speedInfoLabel.Size = UDim2.new(1, -20, 1, -20)
    speedInfoLabel.Position = UDim2.new(0, 10, 0, 10)
    speedInfoLabel.BackgroundTransparency = 1
    speedInfoLabel.Text = "‚ÑπÔ∏è SPEED COIL SIMULATOR:\n\n‚Ä¢ Simula Speed Coil automaticamente\n‚Ä¢ Velocit√† costante garantita\n‚Ä¢ Rilevamento automatico cambi\n‚Ä¢ Nessun item richiesto!"
    speedInfoLabel.TextColor3 = Color3.fromRGB(173, 216, 230)
    speedInfoLabel.TextScaled = true
    speedInfoLabel.Font = Enum.Font.Gotham
    speedInfoLabel.TextXAlignment = Enum.TextXAlignment.Left
    speedInfoLabel.TextYAlignment = Enum.TextYAlignment.Top
    speedInfoLabel.Parent = speedInfoFrame
    
    return speedToggle, sliderLabel, sliderFill, sliderButton, sliderBg
end

-- Funzione per il dragging
local function makeDraggable(frame, dragHandle)
    local function updateInput(input)
        local delta = input.Position - dragStart
        local position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        
        -- Animazione smooth
        local tween = TweenService:Create(frame, TweenInfo.new(dragSpeed, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {Position = position})
        tween:Play()
    end
    
    dragHandle.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragToggle = true
            dragStart = input.Position
            startPos = frame.Position
            
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragToggle = false
                end
            end)
        end
    end)
    
    UserInputService.InputChanged:Connect(function(input)
        if dragToggle and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            updateInput(input)
        end
    end)
end

-- Funzione Infinite Jump (logica avanzata mobile)
local function enableInfiniteJump()
    if jumpConnection then
        jumpConnection:Disconnect()
    end
    
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoid = character:WaitForChild("Humanoid")
    
    -- Logica avanzata per mobile
    local lastJumpTime = 0
    local jumpCooldown = 0.1
    local isJumping = false
    
    -- Touch/Click handler per mobile
    local function onTouch()
        local currentTime = tick()
        if currentTime - lastJumpTime > jumpCooldown and not isJumping then
            isJumping = true
            lastJumpTime = currentTime
            
            -- Jump logic avanzata
            humanoid.JumpPower = 50
            humanoid.Jump = true
            
            -- Reset dopo breve delay
            wait(0.1)
            isJumping = false
        end
    end
    
    -- Connessioni multiple per compatibilit√†
    jumpConnection = RunService.Heartbeat:Connect(function()
        if UserInputService.TouchEnabled then
            -- Mobile touch detection
            local touches = UserInputService:GetTouchInputs()
            for _, touch in pairs(touches) do
                if touch.UserInputState == Enum.UserInputState.Begin then
                    onTouch()
                    break
                end
            end
        end
    end)
    
    -- Backup per mouse click
    mouse.Button1Down:Connect(onTouch)
    
    -- Mantieni jump power costante
    humanoid.Changed:Connect(function(property)
        if property == "JumpPower" and isInfiniteJumpEnabled then
            if humanoid.JumpPower ~= 50 then
                humanoid.JumpPower = 50
            end
        end
    end)
end

-- Funzione Speed Boost (simula Speed Coil)
local function enableSpeedBoost()
    if speedConnection then
        speedConnection:Disconnect()
    end
    
    local character = player.Character or player.CharacterAdded:Wait()
    local humanoid = character:WaitForChild("Humanoid")
    
    -- Salva velocit√† originale se non gi√† salvata
    if originalWalkSpeed == 16 then
        originalWalkSpeed = humanoid.WalkSpeed
    end
    
    -- Applica velocit√† Speed Coil
    humanoid.WalkSpeed = currentSpeedBoost
    
    -- Monitoraggio continuo per mantenere velocit√†
    speedConnection = RunService.Heartbeat:Connect(function()
        if isSpeedBoostEnabled and humanoid.WalkSpeed ~= currentSpeedBoost then
            humanoid.WalkSpeed = currentSpeedBoost
        end
    end)
    
    -- Listener per cambi character
    player.CharacterAdded:Connect(function(newCharacter)
        wait(1)
        if isSpeedBoostEnabled then
            local newHumanoid = newCharacter:WaitForChild("Humanoid")
            newHumanoid.WalkSpeed = currentSpeedBoost
        end
    end)
end

-- Funzione principale
local function initializeScript()
    -- Crea GUI
    local screenGui, mainFrame, headerBar, contentFrame, minimizeBtn, closeBtn = createMainGUI()
    local tabContainer, jumpTab, speedTab, jumpContent, speedContent = createTabs(contentFrame)
    local jumpToggle = createJumpControls(jumpContent)
    local speedToggle, sliderLabel, sliderFill, sliderButton, sliderBg = createSpeedControls(speedContent)
    
    gui = screenGui
    
    -- Rendi draggable
    makeDraggable(mainFrame, headerBar)
    
    -- Tab switching
    jumpTab.MouseButton1Click:Connect(function()
        jumpTab.BackgroundColor3 = Color3.fromRGB(0, 123, 255)
        speedTab.BackgroundColor3 = Color3.fromRGB(108, 117, 125)
        jumpContent.Visible = true
        speedContent.Visible = false
    end)
    
    speedTab.MouseButton1Click:Connect(function()
        speedTab.BackgroundColor3 = Color3.fromRGB(0, 123, 255)
        jumpTab.BackgroundColor3 = Color3.fromRGB(108, 117, 125)
        speedContent.Visible = true
        jumpContent.Visible = false
    end)
    
    -- Jump toggle
    jumpToggle.MouseButton1Click:Connect(function()
        isInfiniteJumpEnabled = not isInfiniteJumpEnabled
        
        if isInfiniteJumpEnabled then
            jumpToggle.Text = "ON"
            jumpToggle.BackgroundColor3 = Color3.fromRGB(40, 167, 69)
            enableInfiniteJump()
        else
            jumpToggle.Text = "OFF"
            jumpToggle.BackgroundColor3 = Color3.fromRGB(220, 53, 69)
            if jumpConnection then
                jumpConnection:Disconnect()
                jumpConnection = nil
            end
        end
    end)
    
    -- Speed toggle
    speedToggle.MouseButton1Click:Connect(function()
        isSpeedBoostEnabled = not isSpeedBoostEnabled
        
        if isSpeedBoostEnabled then
            speedToggle.Text = "ON"
            speedToggle.BackgroundColor3 = Color3.fromRGB(40, 167, 69)
            enableSpeedBoost()
        else
            speedToggle.Text = "OFF"
            speedToggle.BackgroundColor3 = Color3.fromRGB(220, 53, 69)
            if speedConnection then
                speedConnection:Disconnect()
                speedConnection = nil
            end
            
            -- Ripristina velocit√† originale
            local character = player.Character
            if character then
                local humanoid = character:FindFirstChild("Humanoid")
                if humanoid then
                    humanoid.WalkSpeed = originalWalkSpeed
                end
            end
        end
    end)
    
    -- Speed slider
    local draggingSlider = false
    
    sliderButton.MouseButton1Down:Connect(function()
        draggingSlider = true
    end)
    
    UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            draggingSlider = false
        end
    end)
    
    UserInputService.InputChanged:Connect(function(input)
        if draggingSlider and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            local sliderBgAbsolutePos = sliderBg.AbsolutePosition
            local sliderBgAbsoluteSize = sliderBg.AbsoluteSize
            local mouseX = input.Position.X
            
            local relativeX = mouseX - sliderBgAbsolutePos.X
            local percentage = math.clamp(relativeX / sliderBgAbsoluteSize.X, 0, 1)
            
            -- Calcola velocit√† (16 - 200)
            currentSpeedBoost = math.floor(16 + (percentage * 184))
            
            -- Aggiorna UI
            sliderLabel.Text = "Velocit√†: " .. currentSpeedBoost
            sliderFill.Size = UDim2.new(percentage, 0, 1, 0)
            sliderButton.Position = UDim2.new(percentage, -10, 0.5, -10)
            
            -- Applica velocit√† se attivo
            if isSpeedBoostEnabled then
                local character = player.Character
                if character then
                    local humanoid = character:FindFirstChild("Humanoid")
                    if humanoid then
                        humanoid.WalkSpeed = currentSpeedBoost
                    end
                end
            end
        end
    end)
    
    -- Minimize functionality
    minimizeBtn.MouseButton1Click:Connect(function()
        isMinimized = not isMinimized
        
        local targetSize = isMinimized and UDim2.new(0, 350, 0, 50) or UDim2.new(0, 350, 0, 450)
        local targetText = isMinimized and "+" or "‚àí"
        
        -- Animazione smooth
        local tween = TweenService:Create(mainFrame, 
            TweenInfo.new(0.3, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), 
            {Size = targetSize}
        )
        tween:Play()
        
        minimizeBtn.Text = targetText
        contentFrame.Visible = not isMinimized
    end)
    
    -- Close functionality
    closeBtn.MouseButton1Click:Connect(function()
        -- Disabilita tutto prima di chiudere
        if jumpConnection then
            jumpConnection:Disconnect()
        end
        if speedConnection then
            speedConnection:Disconnect()
        end
        
        -- Ripristina velocit√†
        local character = player.Character
        if character then
            local humanoid = character:FindFirstChild("Humanoid")
            if humanoid then
                humanoid.WalkSpeed = originalWalkSpeed
            end
        end
        
        -- Animazione di chiusura
        local tween = TweenService:Create(mainFrame, 
            TweenInfo.new(0.3, Enum.EasingStyle.Quart, Enum.EasingDirection.In), 
            {Size = UDim2.new(0, 0, 0, 0), Position = UDim2.new(0.5, 0, 0.5, 0)}
        )
        tween:Play()
        
        tween.Completed:Connect(function()
            screenGui:Destroy()
        end)
    end)
    
    -- Gestione respawn del player
    player.CharacterAdded:Connect(function(character)
        wait(2) -- Attendi che il character si carichi completamente
        
        -- Riapplica infinite jump se era attivo
        if isInfiniteJumpEnabled then
            enableInfiniteJump()
        end
        
        -- Riapplica speed boost se era attivo
        if isSpeedBoostEnabled then
            enableSpeedBoost()
        end
    end)
end

-- Funzione di sicurezza per verificare se gi√† esiste
local function checkExistingGUI()
    local existingGUI = playerGui:FindFirstChild("AdvancedMobileScript")
    if existingGUI then
        existingGUI:Destroy()
        wait(0.1)
    end
end

-- Notifica di caricamento
local function showLoadingNotification()
    local notification = Instance.new("ScreenGui")
    notification.Name = "LoadingNotification"
    notification.Parent = playerGui
    
    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0, 300, 0, 80)
    frame.Position = UDim2.new(0.5, -150, 0, -100)
    frame.BackgroundColor3 = Color3.fromRGB(40, 167, 69)
    frame.BorderSizePixel = 0
    frame.Parent = notification
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 12)
    corner.Parent = frame
    
    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -20, 1, -20)
    label.Position = UDim2.new(0, 10, 0, 10)
    label.BackgroundTransparency = 1
    label.Text = "üöÄ Advanced Mobile Script Caricato!\nTutte le funzionalit√† sono attive!"
    label.TextColor3 = Color3.fromRGB(255, 255, 255)
    label.TextScaled = true
    label.Font = Enum.Font.GothamBold
    label.Parent = frame
    
    -- Animazione di entrata
    frame:TweenPosition(UDim2.new(0.5, -150, 0, 20), "Out", "Bounce", 0.5)
    
    -- Rimuovi dopo 3 secondi
    wait(3)
    frame:TweenPosition(UDim2.new(0.5, -150, 0, -100), "In", "Quart", 0.3)
    wait(0.3)
    notification:Destroy()
end

-- Funzione per gestire errori
local function safeExecute(func, errorMessage)
    local success, error = pcall(func)
    if not success then
        warn("Advanced Mobile Script Error: " .. errorMessage .. " - " .. tostring(error))
        
        -- Notifica di errore
        local errorGui = Instance.new("ScreenGui")
        errorGui.Name = "ErrorNotification"
        errorGui.Parent = playerGui
        
        local errorFrame = Instance.new("Frame")
        errorFrame.Size = UDim2.new(0, 300, 0, 100)
        errorFrame.Position = UDim2.new(0.5, -150, 0.5, -50)
        errorFrame.BackgroundColor3 = Color3.fromRGB(220, 53, 69)
        errorFrame.BorderSizePixel = 0
        errorFrame.Parent = errorGui
        
        local errorCorner = Instance.new("UICorner")
        errorCorner.CornerRadius = UDim.new(0, 12)
        errorCorner.Parent = errorFrame
        
        local errorLabel = Instance.new("TextLabel")
        errorLabel.Size = UDim2.new(1, -20, 1, -20)
        errorLabel.Position = UDim2.new(0, 10, 0, 10)
        errorLabel.BackgroundTransparency = 1
        errorLabel.Text = "‚ùå Errore Script!\n" .. errorMessage
        errorLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
        errorLabel.TextScaled = true
        errorLabel.Font = Enum.Font.GothamBold
        errorLabel.Parent = errorFrame
        
        wait(5)
        errorGui:Destroy()
    end
end

-- ESECUZIONE PRINCIPALE
print("üöÄ Caricamento Advanced Mobile Script...")
print("üì± Ottimizzato per dispositivi mobili")
print("ü¶ò Funzionalit√†: Infinite Jump + Speed Boost")
print("üéÆ GUI draggable con tabs")

-- Attendi che tutto sia caricato
if not player.Character then
    player.CharacterAdded:Wait()
end

wait(1)

-- Esegui script in modo sicuro
safeExecute(function()
    checkExistingGUI()
    showLoadingNotification()
    initializeScript()
end, "Errore durante l'inizializzazione")

print("‚úÖ Advanced Mobile Script caricato con successo!")
print("üìñ Funzionalit√† disponibili:")
print("   ‚Ä¢ Infinite Jump (logica mobile avanzata)")
print("   ‚Ä¢ Speed Coil Simulator (velocit√† automatica)")
print("   ‚Ä¢ GUI draggable e minimizzabile")
print("   ‚Ä¢ Compatibilit√† touch e mouse")
print("   ‚Ä¢ Rilevamento automatico cambi velocit√†")
print("üéØ Script pronto all'uso!"

--[[
=== ADVANCED MOBILE ROBLOX SCRIPT ===

FUNZIONALIT√Ä PRINCIPALI:
ü¶ò INFINITE JUMP:
- Logica avanzata ottimizzata per mobile
- Touch detection avanzata
- Cooldown intelligente per evitare spam
- Compatibilit√† touch + mouse
- Jump power costante

‚ö° SPEED COIL SIMULATOR:
- Simula perfettamente Speed Coil
- Velocit√† regolabile (16-200)
- Rilevamento automatico cambi
- Mantiene velocit√† costante
- Funziona senza avere l'item

üéÆ GUI AVANZATA:
- Completamente draggable
- Minimizzabile e chiudibile
- Sistema tabs funzionale
- Design moderno con animazioni
- Ottimizzata per mobile e desktop

üîß CARATTERISTICHE TECNICHE:
- Gestione errori avanzata
- Auto-restart dopo respawn
- Notifiche di stato
- Performance ottimizzate
- Compatibilit√† universale

ISTRUZIONI:
1. Esegui lo script
2. Usa le tabs per navigare
3. Attiva/disattiva le funzionalit√†
4. Regola la velocit√† con lo slider
5. Trascina la GUI dove preferisci

COMPATIBILIT√Ä:
‚úÖ Mobile (Touch)
‚úÖ Desktop (Mouse)
‚úÖ Tutti i giochi Roblox
‚úÖ Auto-restart su respawn
‚úÖ Performance ottimizzate

DEVELOPED BY: Advanced Script System
VERSION: 2.0 Mobile Edition
--]]
