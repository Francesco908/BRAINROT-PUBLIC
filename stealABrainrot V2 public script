-- Admin vs Admin Script by Znfpro
-- Steal Rainbow & Speed Boost System

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local SoundService = game:GetService("SoundService")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")
local character = player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local rootPart = character:WaitForChild("HumanoidRootPart")

-- Variables
local basePosition = Vector3.new(0, 5, 0) -- Default base position
local stealActive = false
local speedBoostActive = false
local speedCoilEquipped = false

-- Create ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "AdminVsAdminGui"
screenGui.ResetOnSpawn = false
screenGui.Parent = playerGui

-- Startup Animation
local function showStartupMessage()
    local startupFrame = Instance.new("Frame")
    startupFrame.Size = UDim2.new(0, 300, 0, 100)
    startupFrame.Position = UDim2.new(0.5, -150, 0.5, -50)
    startupFrame.BackgroundTransparency = 1
    startupFrame.Parent = screenGui
    
    local startupLabel = Instance.new("TextLabel")
    startupLabel.Size = UDim2.new(1, 0, 1, 0)
    startupLabel.BackgroundTransparency = 1
    startupLabel.Text = "Made by Znfpro"
    startupLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    startupLabel.TextScaled = true
    startupLabel.Font = Enum.Font.GothamBold
    startupLabel.TextTransparency = 1
    startupLabel.Parent = startupFrame
    
    -- Fade in
    local fadeIn = TweenService:Create(startupLabel, TweenInfo.new(1, Enum.EasingStyle.Quad), {TextTransparency = 0})
    fadeIn:Play()
    
    wait(2)
    
    -- Fade out
    local fadeOut = TweenService:Create(startupLabel, TweenInfo.new(1, Enum.EasingStyle.Quad), {TextTransparency = 1})
    fadeOut:Play()
    fadeOut.Completed:Wait()
    
    startupFrame:Destroy()
end

-- Play background music
local function playBackgroundMusic()
    local sound = Instance.new("Sound")
    sound.SoundId = "rbxassetid://76714680193450"
    sound.Volume = 0.5
    sound.Looped = true
    sound.Parent = workspace
    sound:Play()
end

-- Create draggable button function
local function createDraggableButton(text, size, position, callback)
    local button = Instance.new("TextButton")
    button.Size = size
    button.Position = position
    button.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    button.BorderSizePixel = 0
    button.Text = text
    button.TextColor3 = Color3.fromRGB(255, 255, 255)
    button.TextScaled = true
    button.Font = Enum.Font.GothamBold
    button.Parent = screenGui
    
    -- Rounded corners
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 12)
    corner.Parent = button
    
    -- Dragging functionality
    local dragging = false
    local dragStart = nil
    local startPos = nil
    
    button.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPos = button.Position
            
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)
    
    button.InputChanged:Connect(function(input)
        if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            local delta = input.Position - dragStart
            button.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)
    
    -- Button click
    button.MouseButton1Click:Connect(callback)
    
    return button
end

-- Status message function
local function showStatusMessage(text, duration)
    local statusLabel = Instance.new("TextLabel")
    statusLabel.Size = UDim2.new(0, 200, 0, 50)
    statusLabel.Position = UDim2.new(0.5, -100, 0.1, 0)
    statusLabel.BackgroundTransparency = 1
    statusLabel.Text = text
    statusLabel.TextColor3 = Color3.fromRGB(255, 255, 0)
    statusLabel.TextScaled = true
    statusLabel.Font = Enum.Font.GothamBold
    statusLabel.Parent = screenGui
    
    game:GetService("Debris"):AddItem(statusLabel, duration or 2)
end

-- Set base position
local function setBasePosition()
    basePosition = rootPart.Position
    showStatusMessage("Base Set!", 1.5)
end

-- Advanced movement system
local function moveToPosition(targetPos, speed, callback)
    local bodyVelocity = Instance.new("BodyVelocity")
    bodyVelocity.MaxForce = Vector3.new(4000, 0, 4000)
    bodyVelocity.Velocity = Vector3.new(0, 0, 0)
    bodyVelocity.Parent = rootPart
    
    local bodyPosition = Instance.new("BodyPosition")
    bodyPosition.MaxForce = Vector3.new(4000, 4000, 4000)
    bodyPosition.Position = targetPos
    bodyPosition.D = 2000
    bodyPosition.P = 10000
    bodyPosition.Parent = rootPart
    
    -- Wait until close to target
    local connection
    connection = RunService.Heartbeat:Connect(function()
        local distance = (rootPart.Position - targetPos).Magnitude
        if distance < 5 then
            connection:Disconnect()
            bodyVelocity:Destroy()
            bodyPosition:Destroy()
            if callback then callback() end
        end
    end)
end

-- Advanced jumping system
local function performMultiJump()
    local jumpForce = Instance.new("BodyVelocity")
    jumpForce.MaxForce = Vector3.new(0, math.huge, 0)
    jumpForce.Velocity = Vector3.new(0, 80, 0) -- Strong jump
    jumpForce.Parent = rootPart
    
    wait(0.3)
    jumpForce:Destroy()
end

-- Steal Rainbow function
local function stealRainbow()
    if stealActive then return end
    stealActive = true
    
    showStatusMessage("Set Base", 1)
    wait(1)
    setBasePosition()
    wait(0.5)
    showStatusMessage("Steal!", 1)
    
    -- Phase 1: Move backward quickly
    local backwardPos = rootPart.Position - rootPart.CFrame.LookVector * 20
    moveToPosition(backwardPos, 50, function()
        
        -- Phase 2: Move toward base with jumping
        local function moveWithJumps()
            local direction = (basePosition - rootPart.Position).Unit
            local horizontalDirection = Vector3.new(direction.X, 0, direction.Z).Unit
            
            -- Move horizontally fast
            local bodyVelocity = Instance.new("BodyVelocity")
            bodyVelocity.MaxForce = Vector3.new(4000, 0, 4000)
            bodyVelocity.Velocity = horizontalDirection * 60
            bodyVelocity.Parent = rootPart
            
            -- Jumping sequence
            local jumpCount = 0
            local jumpConnection
            jumpConnection = RunService.Heartbeat:Connect(function()
                local distanceToBase = (rootPart.Position - basePosition).Magnitude
                
                if distanceToBase < 8 then
                    jumpConnection:Disconnect()
                    bodyVelocity:Destroy()
                    showStatusMessage("Steal Complete!", 2)
                    stealActive = false
                    return
                end
                
                -- Jump every 1.5 seconds
                if jumpCount % 90 == 0 then -- 60 FPS * 1.5 = 90 frames
                    performMultiJump()
                end
                jumpCount = jumpCount + 1
            end)
        end
        
        moveWithJumps()
    end)
end

-- Speed Boost function
local function toggleSpeedBoost()
    speedBoostActive = not speedBoostActive
    
    if speedBoostActive then
        showStatusMessage("Speed Boost ON", 1.5)
        
        -- Check for Speed Coil in backpack
        local speedCoil = player.Backpack:FindFirstChild("Speed Coil")
        if speedCoil then
            humanoid:EquipTool(speedCoil)
            speedCoilEquipped = true
            
            -- Keep Speed Coil equipped
            local equipConnection
            equipConnection = RunService.Heartbeat:Connect(function()
                if not speedBoostActive then
                    equipConnection:Disconnect()
                    return
                end
                
                local currentTool = character:FindFirstChildOfClass("Tool")
                if not currentTool or currentTool.Name ~= "Speed Coil" then
                    local newSpeedCoil = player.Backpack:FindFirstChild("Speed Coil")
                    if newSpeedCoil then
                        humanoid:EquipTool(newSpeedCoil)
                    end
                end
            end)
        else
            showStatusMessage("Speed Coil not found!", 2)
            speedBoostActive = false
        end
    else
        showStatusMessage("Speed Boost OFF", 1.5)
        speedCoilEquipped = false
    end
end

-- Initialize GUI
local function initializeGUI()
    -- Create Steal Rainbow button
    local stealButton = createDraggableButton(
        "Steal Rainbow",
        UDim2.new(0, 150, 0, 60),
        UDim2.new(0, 50, 0, 200),
        stealRainbow
    )
    
    -- Create Speed Boost button
    local speedButton = createDraggableButton(
        "Speed Boost",
        UDim2.new(0, 150, 0, 60),
        UDim2.new(0, 220, 0, 200),
        toggleSpeedBoost
    )
    
    -- Update Speed Boost button color
    RunService.Heartbeat:Connect(function()
        if speedBoostActive then
            speedButton.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
        else
            speedButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
        end
    end)
end

-- Main execution
spawn(function()
    showStartupMessage()
    playBackgroundMusic()
    initializeGUI()
end)

-- Handle character respawn
player.CharacterAdded:Connect(function(newCharacter)
    character = newCharacter
    humanoid = character:WaitForChild("Humanoid")
    rootPart = character:WaitForChild("HumanoidRootPart")
    stealActive = false
    speedBoostActive = false
    speedCoilEquipped = false
end)
